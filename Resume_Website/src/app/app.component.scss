:host { display: block; }

/* ========== TOKENS ========== */
:root {
  color-scheme: dark;

  /* Colors */
  --bg: #0e1724;
  --bg-2: #0a1020;
  --ink: #eaf1ff;
  --muted: #9fb0c8;
  --primary: #4ea4ff;
  --primary-2: #2e7de9;
  --accent: #58d6a6;

  /* Surfaces */
  --card: rgba(255,255,255,0.06);
  --card-2: rgba(255,255,255,0.045);
  --border: 1px solid rgba(255,255,255,0.10);

  /* Effects */
  --radius-lg: 16px;
  --shadow: 0 30px 80px rgba(0,0,0,0.5);
  --ring: 0 0 0 3px rgba(78,164,255,.35);

  /* Spacing scale */
  --space-1: 6px;
  --space-2: 10px;
  --space-3: 14px;
  --space-4: 18px;
  --space-5: 24px;

  /* Legacy bridge */
  --text: var(--ink);
}

/* Light theme override (single place) */
html.theme-light {
  color-scheme: light;
  --bg: #f6f8fb;
  --bg-2: #eef2f8;
  --ink: #0b1930;
  --muted: #526276;
  --card: rgba(255,255,255,.8);
  --card-2: rgba(255,255,255,.65);
  --border: 1px solid rgba(0,0,0,.08);
  --primary: #2e7de9;
  --primary-2: #1f66c5;
  --accent: #008f6b;
  --shadow: 0 20px 50px rgba(0,0,0,.15);
}

/* Optional extra palettes */
html.theme-deep {
  --bg:#070b14; --bg-2:#050811;
  --card:rgba(255,255,255,.05); --card-2:rgba(255,255,255,.035);
}
html.theme-midnight {
  --bg:#05060c; --bg-2:#05060c;
  --primary:#8a6bff; --accent:#ff7c9e;
}

/* ========== MIXINS / HELPERS ========== */
@mixin backdrop-blur($blur:12px, $sat:110%) {
  -webkit-backdrop-filter: blur($blur) saturate($sat);
  backdrop-filter: blur($blur) saturate($sat);
}

@mixin focus-ring {
  outline: none;
  box-shadow: var(--ring);
  border-radius: 10px;
}

@mixin surface-card {
  background:
    linear-gradient(180deg, var(--card) 0%, var(--card-2) 100%),
    linear-gradient(0deg, rgba(255,255,255,.06), rgba(255,255,255,0));
  border: var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
}

@mixin caret($size:8px,$weight:2px,$color:var(--ink)) {
  content: "";
  display: block;
  width: $size; height: $size;
  border-right: $weight solid $color;
  border-bottom: $weight solid $color;
}

/* Reusable scrollbar styling */
@mixin thin-scrollbar($track: rgba(255,255,255,0.05), $thumb: var(--primary-2)) {
  scrollbar-width: thin;
  scrollbar-color: $thumb $track;

  &::-webkit-scrollbar { height: 8px; background: $track; border-radius: 4px; }
  &::-webkit-scrollbar-thumb {
    background: $thumb; border-radius: 4px;
    &:hover { background: var(--primary); }
  }
}

/* ========== BASE ========== */
* { box-sizing: border-box; }
a { color: inherit; }
img { max-width: 100%; display: block; }
:focus-visible { @include focus-ring; }
html { -webkit-text-size-adjust: 100%; }

.container {
  max-width: 1140px; margin-inline: auto; padding: 1rem 16px 0;

  + .container { padding-top: 0 !important; }
}

/* Sticky header container */
.sticky-container { position: sticky; top: 0; z-index: 100; padding-block: 0; }

.page { display: grid; grid-template-columns: 1fr; gap: 24px; }

/* ========== SHARED UI ========== */
.glass {
  @include backdrop-blur();
  @include surface-card;
  position: relative;
  --gb: linear-gradient(90deg, rgba(255,255,255,.2), rgba(255,255,255,0), rgba(255,255,255,.2));
  outline: 1px solid transparent;

  &::after {
    content:""; position:absolute; inset:0; border-radius: inherit; pointer-events:none;
    background: var(--gb); opacity:.06;
  }
}

/* Buttons */
.btn {
  position: relative; display: inline-flex; align-items: center; gap: 10px;
  padding: 12px 18px; border-radius: 12px; font-weight: 700; letter-spacing: .3px;
  background: transparent; color: var(--ink); border: 1px solid rgba(255,255,255,.14);
  cursor: pointer; transform: translateZ(0);
  transition: transform .2s;

  &:hover { transform: translateY(-1px); }
  &.icon { width: 40px; height: 40px; justify-content: center; }

  .ripple {
    position: absolute; inset: 0; border-radius: inherit; overflow: hidden; pointer-events: none;

    &::after {
      content: ""; position: absolute; width: 12px; height: 12px; border-radius: 999px; background: rgba(255,255,255,.5);
      transform: translate(-50%,-50%) scale(0); opacity: .6; left: var(--x); top: var(--y);
    }
  }

  &.rippling .ripple::after { animation: ripple .6s ease-out; }
}
.btn-primary { background: linear-gradient(180deg, var(--primary) 0%, var(--primary-2) 100%); border-color: transparent; }
.btn-ghost:hover { background: rgba(255,255,255,.06); }

@keyframes ripple { to { transform: translate(-50%,-50%) scale(12); opacity: 0; } }

/* Dots nav & back-to-top */
.dots-nav {
  position: fixed; right: 18px; top: 50%; translate: 0 -50%; z-index: 60; display: grid; gap: 10px;

  a {
    width: 10px; height: 10px; border-radius: 50%; background: rgba(255,255,255,.28);
    box-shadow: 0 0 0 0 rgba(255,255,255,.25);
    transition: transform .2s, background .2s, box-shadow .2s;

    &:hover { transform: scale(1.2); }
    &.active { background: var(--primary); box-shadow: 0 0 0 6px rgba(78,164,255,.22); }
  }
}

.to-top {
  position: fixed; right: 18px; bottom: 18px; z-index: 60; opacity: 0; pointer-events: none;
  transform: translateY(8px); transition: opacity .2s, transform .2s;
  border-radius: 999px; width: 44px; height: 44px; border: 1px solid rgba(255,255,255,.2);
  background: rgba(0,0,0,.25); color: var(--ink);
}
html.show-top .to-top { opacity: 1; pointer-events: auto; transform: none; }

/* Hero */
.hero { position: relative; overflow: hidden; padding: 28px; margin-top: -4px; }
.hero-content { position: relative; z-index: 2; }

.badge {
  display: inline-block; padding: 6px 10px; font-size: 12px; color: var(--muted);
  border: 1px solid rgba(255,255,255,.16); background: rgba(255,255,255,.05); border-radius: 999px;

  &.pulse { animation: pulse 2.2s ease-in-out infinite; }
}
@keyframes pulse {
  0%,100%{box-shadow:0 0 0 0 rgba(78,164,255,0);}
  50%{box-shadow:0 0 0 12px rgba(78,164,255,.12);}
}

.hi { display: block; font-weight: 700; font-size: clamp(22px, 3.2vw, 28px); color: var(--muted); }
.name { display: block; font-weight: 800; font-size: clamp(40px, 6vw, 64px); letter-spacing: -.02em; }

.gradient-text {
  background: linear-gradient(90deg, #b9d4ff, #7cc0ff, #6fe0b2);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  display: inline-block; /* fixes Chromium gradient text clipping */
}

.subtitle { color: var(--muted); }
.ctas { display: flex; gap: 12px; margin-top: 18px; }

/* Marquee */
.marquee {
  margin-top: 22px; overflow: hidden;
  mask: linear-gradient(90deg, transparent, #000 8%, #000 92%, transparent);

  .track { display: flex; gap: 28px; animation: marquee 60s linear infinite; }
  span { opacity: .75; }
}
@keyframes marquee { from { transform: translateX(0); } to { transform: translateX(-50%); } }

/* Sections */
.section { padding: 24px 28px; }
.section h2 { margin: 0 0 14px; font-size: 22px; }

/* Lead */
.lead { color: var(--muted); max-width: 68ch; }

/* Chips */
.chips { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
.chip {
  border: 1px solid rgba(255,255,255,.18); background: rgba(255,255,255,.06); color: var(--ink); border-radius: 999px;
  padding: 8px 12px; cursor: pointer; transition: transform .2s, box-shadow .2s;

  &:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,.25); }
}

/* Timeline */
.timeline { display: grid; gap: 12px; }
.step {
  position: relative; padding: 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,.12);
  background:
    radial-gradient(120px 80px at var(--spot-x,50%) var(--spot-y,50%), rgba(255,255,255,.08), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  transition: transform .12s ease, background .2s ease;

  header { display: flex; justify-content: space-between; align-items: center; gap: 14px; }
  .role { font-weight: 700; }
  .company { color: var(--muted); }
  .meta { display: flex; align-items: center; gap: 10px; }
}

.btn.caret::before { @include caret(); transform: rotate(-45deg); transition: transform .2s; }
.btn.caret.open::before { transform: rotate(45deg); }

.content { overflow: hidden; max-height: 0; transition: max-height .24s ease; }
.content.open { max-height: 200px; }

/* Projects Carousel */
.projects-track {
  display: flex; gap: 16px; overflow-x: auto; scroll-behavior: smooth; padding-bottom: 8px; cursor: grab;
  -webkit-overflow-scrolling: touch; overscroll-behavior-x: contain;
  @include thin-scrollbar();

  &:active { cursor: grabbing; }
}
.project {
  flex: 0 0 340px; padding: 16px; border-radius: 14px; border: 1px solid rgba(255,255,255,.12);
  background:
    radial-gradient(120px 80px at var(--spot-x,50%) var(--spot-y,50%), rgba(255,255,255,.08), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  transition: transform .12s ease, background .2s ease;

  &.ghost { opacity: 0; pointer-events: none; }

  &-head { display: flex; justify-content: space-between; align-items: center; gap: 8px; }
  p { color: var(--muted); margin: 8px 0 12px; }
}
.link { text-decoration: none; font-weight: 700; color: var(--primary); }
.link:hover { text-decoration: underline; }

/* Projects section helper */
.projects-section { position: relative; }
.scroll-indicator {
  position: absolute; right: 16px; bottom: 16px; width: 40px; height: 40px; border-radius: 50%;
  background: rgba(0,0,0,0.3); @include backdrop-blur(4px, 100%);
  display: flex; align-items: center; justify-content: center; pointer-events: none; opacity: 0.8; z-index: 5;

  &::after { @include caret(10px, 2px); transform: rotate(-45deg) translateX(-2px); }
}

/* Testimonials */
.quotes { display: grid; gap: 14px; grid-template-columns: repeat(auto-fit, minmax(280px,1fr)); }
.quote {
  padding: 16px; border: 1px solid rgba(255,255,255,.12); border-radius: 14px;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));

  blockquote { margin: 0 0 10px; color: var(--ink); }
  figcaption { color: var(--muted); }
}

/* Contact */
.contact-grid { display: grid; gap: 18px; grid-template-columns: 1.2fr 1fr; align-items: start; }
.contact-actions { display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0 0; }
.contact-form {
  display: grid; grid-template-columns: repeat(2,1fr); gap: 12px;

  .full { grid-column: 1 / -1; }
  label { display: grid; gap: 6px; font-weight: 600; color: var(--muted); }

  input, textarea {
    border-radius: 10px; border: 1px solid rgba(255,255,255,.16); background: rgba(0,0,0,.14);
    padding: 10px 12px; color: var(--ink);

    &:focus { box-shadow: var(--ring); border-color: transparent; }
  }
}

/* Spotlight & Tilt (consolidated) */
.tilt-card {
  --spot-x: 50%;
  --spot-y: 50%;
  --spot-opacity: 0;

  transform: perspective(800px) rotateX(var(--rx,0)) rotateY(var(--ry,0));
  transition: transform .12s ease;

  &::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: radial-gradient(600px circle at var(--spot-x) var(--spot-y),
                                rgba(255,255,255,0.15), transparent 60%);
    opacity: var(--spot-opacity);
    transition: opacity 180ms ease;
  }
}

/* Palette */
.palette-backdrop {
  position: fixed; inset: 0; background: rgba(0,0,0,.4); opacity: 0; pointer-events: none; transition: opacity .2s; z-index: 60;

  &.open { opacity: 1; pointer-events: auto; }
}
.palette {
  position: fixed; left: 50%; top: 12vh; translate: -50% 0; width: min(720px,92vw); z-index: 70;
  background: rgba(20,26,36,.9); border: 1px solid rgba(255,255,255,.15); border-radius: 14px; box-shadow: var(--shadow);
  opacity: 0; transform: translateY(-12px); pointer-events: none; transition: opacity .2s, transform .2s;

  &.open { opacity: 1; transform: none; pointer-events: auto; }
}
.palette-input {
  width: 100%; border: 0; outline: 0; background: transparent; color: var(--ink);
  font: 600 18px/1.2 Inter,system-ui; padding: 16px 18px; border-bottom: 1px solid rgba(255,255,255,.12);
}
.palette-list {
  max-height: 46vh; overflow: auto; margin: 0; padding: 8px; list-style: none;

  li {
    display: grid; grid-template-columns: 120px 1fr auto; gap: 14px; align-items: center; padding: 10px 12px; border-radius: 10px; cursor: pointer;
    &.active, &:hover { background: rgba(255,255,255,.06); }
  }

  .k { color: var(--primary); font-weight: 700; }
  .t { font-weight: 700; }
  .h { color: var(--muted); }
}
.palette-hint { color: var(--muted); padding: 10px 14px; border-top: 1px solid rgba(255,255,255,.12); font-size: 12px; }

/* Cursor */
#cursor-dot {
  position: fixed; width: 10px; height: 10px; border-radius: 50%; pointer-events: none; z-index: 90;
  background: radial-gradient(circle, rgba(255,255,255,.95), rgba(255,255,255,.1));
  mix-blend-mode: screen; transform: translate(-50%,-50%);
}

/* Reveal system */
.reveal { opacity: 0; transform: translateY(14px); transition: opacity .4s ease, transform .4s ease; }
.reveal.is-visible { opacity: 1; transform: none; }

/* Footer */
.footer { text-align: center; color: var(--muted); padding: 14px 0 28px; }

/* ========== RESPONSIVE ========== */
@media (max-width: 1024px) {
  .projects-track { gap: 12px; }
  .contact-grid { grid-template-columns: 1fr; }
}

@media (max-width: 768px) {
  .container { padding: 1rem 12px 0; }
  .glass { border-radius: 12px; }
  .hero, .section { padding: 20px; }
  .dots-nav { right: 12px; }
  .to-top { right: 12px; bottom: 12px; }
  .ctas { flex-wrap: wrap; }
}

@media (max-width: 480px) {
  /* Prevent horizontal scrolling on mobile */
  html, body { max-width: 100vw; overflow-x: hidden; width: 100vw; }

  /* Force elements within viewport */
  * { max-width: 100vw; overflow-wrap: break-word; word-wrap: break-word; }

  .container { padding: 1rem 8px 0; width: 100%; max-width: 100%; margin-inline: 0; overflow: hidden; }
  .glass { border-radius: 8px; width: 100%; max-width: 100%; margin-inline: 0; overflow: hidden; @include backdrop-blur(); }
  .hero, .section { padding: 12px; width: 100%; max-width: 100%; margin-inline: 0; overflow: hidden; }

  .dots-nav { right: 4px; }
  .dots-nav a { width: 6px; height: 6px; }

  .to-top { right: 8px; bottom: 8px; width: 32px; height: 32px; }

  .hi { font-size: 18px; max-width: 100%; }
  .name { font-size: 32px; max-width: 100%; }
  .subtitle { max-width: 100%; }

  .ctas { gap: 8px; margin-top: 12px; flex-wrap: wrap; width: 100%; max-width: 100%; }
  .btn { padding: 8px 12px; font-size: 14px; max-width: 100%; }

  .projects-track {
    gap: 8px; width: 100%; max-width: 100%; padding: 0 8px 8px;
    overflow-x: auto; -webkit-overflow-scrolling: touch; scroll-snap-type: x mandatory;
    scrollbar-width: none;

    &::-webkit-scrollbar { display: none; }
  }
  .project { flex: 0 0 85%; padding: 12px; max-width: 85%; scroll-snap-align: center; border-radius: 10px; }
  .project-head { flex-direction: column; align-items: flex-start; }
  .project h3 { font-size: 16px; max-width: 100%; }
  .project p { font-size: 14px; max-width: 100%; }

  .scroll-indicator { width: 32px; height: 32px; right: 12px; bottom: 12px; }
  .scroll-indicator::after { width: 8px; height: 8px; }

  .palette { width: 90vw; }
  .palette-input { padding: 12px 14px; font-size: 15px; }

  .contact-form { gap: 8px; grid-template-columns: 1fr; }
  .contact-form input, .contact-form textarea { max-width: 100%; width: 100%; }

  .chips { gap: 4px; flex-wrap: wrap; width: 100%; max-width: 100%; }
  .chip { padding: 4px 8px; font-size: 12px; margin-bottom: 4px; }

  .main, .page { width: 100%; max-width: 100%; padding: 0; margin: 0; overflow: hidden; }

  .marquee { max-width: 100%; width: 100%; overflow: hidden; }
  .lead { max-width: 100%; font-size: 14px; }

  .timeline, .step { width: 100%; max-width: 100%; overflow: hidden; }
  .step header { flex-direction: column; align-items: flex-start; gap: 8px; }

  .badges { display: flex; flex-wrap: wrap; gap: 4px; width: 100%; max-width: 100%; }
  .badge { font-size: 10px; padding: 4px 6px; }
}

@media (max-width: 360px) {
  .hero, .section { padding: 14px; }
  .hi { font-size: 18px; }
  .name { font-size: 32px; }
  .btn { padding: 8px 12px; font-size: 14px; }
  .project { flex: 0 0 260px; padding: 12px; }
}

/* Motion reduction */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
  .marquee .track { animation: none !important; }
}

/* ========== PORTFOLIO ========== */

/* Section wrapper */
#portfolio.portfolio-section {
  position: relative;
}

/* --- Variant A: Carousel (matches Projects UX) --- */
.portfolio-track {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  scroll-behavior: smooth;
  padding-bottom: 8px;
  cursor: grab;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
  @include thin-scrollbar();

  &:active { cursor: grabbing; }

  /* Scroll hint edges */
  &::before,
  &::after {
    content: "";
    position: sticky;
    top: 0;
    width: 42px;
    height: 0; /* creates a sticky block without affecting layout */
    align-self: stretch;
    pointer-events: none;
    z-index: 3;
  }
  &::before {
    left: 0;
    background:
      linear-gradient(90deg, rgba(0,0,0,.25), rgba(0,0,0,0));
  }
  &::after {
    margin-left: auto;
    right: 0;
    background:
      linear-gradient(-90deg, rgba(0,0,0,.25), rgba(0,0,0,0));
  }
}

.portfolio-card {
  position: relative;
  flex: 0 0 420px;
  padding: 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.12);
  background:
    radial-gradient(120px 80px at var(--spot-x,50%) var(--spot-y,50%), rgba(255,255,255,.08), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  transition: transform .12s ease, background .2s ease;

  .thumb {
    display: block;
    border-radius: 12px;
    overflow: hidden;
    aspect-ratio: 16 / 9;
    background: rgba(0,0,0,.2);
    border: 1px solid rgba(255,255,255,.12);
    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: translateZ(0);
      transition: transform .25s ease, filter .25s ease;
      will-change: transform;
    }
    &:hover img { transform: scale(1.02); }
  }

  .portfolio-meta {
    margin-top: 10px;
    .title { margin: 0 0 6px; font-size: 16px; line-height: 1.3; }
    .sub {
      display: flex; align-items: center; gap: 8px;
      color: var(--muted); font-size: 13px;
      .client { color: var(--primary); text-decoration: none; }
      .client:hover { text-decoration: underline; }
      .sep { opacity: .5; }
      .views { opacity: .8; }
    }
  }
}

/* --- Variant B: Grid (if you keep the grid markup) --- */
.portfolio-grid {
  display: grid;
  gap: 16px;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
}

.portfolio-item {
  position: relative;
  padding: 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.12);
  background:
    radial-gradient(120px 80px at var(--spot-x,50%) var(--spot-y,50%), rgba(255,255,255,.08), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  transition: transform .12s ease, background .2s ease;

  h3 { margin: 0 0 6px; font-size: 16px; }
  p { margin: 0 0 6px; color: var(--muted); }
  .badge { display: inline-block; margin-bottom: 8px; }

  .gifs {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px,1fr));
    gap: 8px;

    a {
      display: block;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.2);

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        aspect-ratio: 16 / 9;
        transition: transform .25s ease, filter .25s ease;
      }
      &:hover img { transform: scale(1.02); }
    }
  }
}

/* Shared tweaks for both variants */
.portfolio-section h2 { margin: 0 0 14px; font-size: 22px; }
.portfolio-section .tilt-card { position: relative; } /* enables your spotlight overlay */

/* ========== RESPONSIVE (portfolio) ========== */
@media (max-width: 1024px) {
  .portfolio-card { flex-basis: 380px; }
}

@media (max-width: 768px) {
  .portfolio-card { flex-basis: 320px; }
}

@media (max-width: 480px) {
  .portfolio-track {
    gap: 8px;
    padding: 0 8px 8px;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;
    &::-webkit-scrollbar { display: none; }
  }
  .portfolio-card {
    flex: 0 0 85%;
    max-width: 85%;
    padding: 12px;
    scroll-snap-align: center;
    border-radius: 10px;
  }
  .portfolio-grid { gap: 12px; grid-template-columns: 1fr; }
}

/* Motion reduction for animated scale on thumbnails */
@media (prefers-reduced-motion: reduce) {
  .portfolio-card .thumb img,
  .portfolio-item .gifs img { transition: none !important; }
}
