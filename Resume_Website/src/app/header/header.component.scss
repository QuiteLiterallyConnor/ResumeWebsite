:host { display: block; }

/* Vars */
:root {
  --hdr-h: 56px;
  --hdr-h-scrolled: 48px;
  --ink-h: 3px;
  --ink-w: 60px; /* base used for scaleX math */
  --blur: 14px;
}

.header.sticky {
  position: sticky; top: 0; z-index: 100;
  height: var(--hdr-h); padding: 0; display: flex; align-items: center;
  transition: height .25s ease, background .25s ease, box-shadow .25s ease, border-color .25s ease;
  margin-bottom: 1px; isolation: isolate; /* for progress bar */
  width: 100%; /* Ensure full width within container */
}
html.is-scrolled .header.sticky { height: var(--hdr-h-scrolled); }
.header-inner {
  max-width: 1140px; margin: 0 auto; padding: 0 16px;
  width: 100%;
  display: flex; align-items: center; justify-content: space-between; gap: 12px;
}

/* Frosted glass shell */
.glass {
  -webkit-backdrop-filter: blur(12px) saturate(110%);
  backdrop-filter: blur(12px) saturate(110%);
  background:
    linear-gradient(180deg, var(--card) 0%, var(--card-2) 100%),
    linear-gradient(0deg, rgba(255,255,255,.06), rgba(255,255,255,0));
  border: var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  backdrop-filter: blur(var(--blur));
}

/* Scroll progress (top hairline) */
.scroll-progress {
  position: absolute; inset: 0 auto auto 0; height: 2px; width: 100%;
  transform-origin: 0 50%;
  background: linear-gradient(90deg, var(--primary), var(--accent));
  border-radius: 2px;
  opacity: .75; pointer-events: none;
}

/* Brand */
.brand { display: inline-flex; align-items: center; gap: 10px; text-decoration: none; }
.brand-mark { width: 28px; height: 28px; display: grid; place-items: center; }
.brand-type { color: var(--ink); font-weight: 800; letter-spacing: .2px; }
.brand-type .muted { color: var(--muted); font-weight: 700; }

/* Nav */
.nav {
  position: relative; display: flex; gap: 8px; padding: 4px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));
  border: 1px solid rgba(255,255,255,.10);
  overflow: auto hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none; /* Firefox */
}
.nav::-webkit-scrollbar { display: none; }

.nav a {
  position: relative;
  --pad-x: 14px;
  color: var(--muted); text-decoration: none; font-weight: 800; letter-spacing: .3px;
  padding: 10px var(--pad-x);
  border-radius: 999px;
  transition: color .2s ease, transform .2s ease, background .2s ease, text-shadow .2s ease;
  white-space: nowrap;
}
.nav a:hover, .nav a.active {
  color: var(--ink);
  text-shadow: 0 0 .6px currentColor;
}
.nav a::after {
  content: '';
  position: absolute; left: var(--pad-x); right: var(--pad-x); bottom: 6px; height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
  transform: scaleX(0); transform-origin: 50% 50%;
  transition: transform .25s ease;
}
.nav a:hover::after, .nav a.active::after { transform: scaleX(1); }

/* Neon ink (bar) + secondary glow */
.nav-ink, .nav-ink-glow {
  position: absolute; left: 0; bottom: 2px; height: var(--ink-h); width: var(--ink-w);
  border-radius: 99px; transform: translateX(0);
  transition: transform .32s cubic-bezier(.22,1,.36,1);
  pointer-events: none;
}
.nav-ink {
  background: linear-gradient(90deg, var(--primary), var(--accent));
}
.nav-ink-glow {
  filter: blur(10px); opacity: .6;
  background: linear-gradient(90deg, var(--primary), var(--accent));
}

/* Buttons */
.btn {
  position: relative; display: inline-flex; align-items: center; gap: 10px;
  padding: 10px 14px; border-radius: 12px; font-weight: 800; letter-spacing: .3px;
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  color: var(--ink); border: 1px solid rgba(255,255,255,.14);
  cursor: pointer; transform: translateZ(0);
  box-shadow: 0 1px 0 rgba(255,255,255,.06) inset, 0 8px 24px rgba(0,0,0,.18);
  transition: border-color .2s ease, background .2s ease, transform .15s ease;
}
.btn:hover { transform: translateY(-1px); }
.btn:active { transform: translateY(0); }
.btn.icon { width: 40px; height: 40px; justify-content: center; padding: 0; }
.btn.cmd { padding: 10px 16px; }
.btn .keys { font-feature-settings: "calt" 0; font-variant-numeric: tabular-nums; opacity: .9; }

/* Theme toggle dot */
.btn.icon.theme .dot {
  width: 14px; height: 14px; border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, var(--primary), var(--accent));
  box-shadow: 0 0 12px rgba(0,0,0,.35), 0 0 18px rgba(0,0,0,.15) inset;
}

/* Theme select, upgraded */
.theme-select { position: relative; display: inline-flex; align-items: center; }
.theme-picker {
  appearance: none;
  background-color: rgba(0, 0, 0, 0.4); /* semi-dark so text stands out */
  color: var(--ink); /* or var(--text) if you have it */
  border: 1px solid rgba(255, 255, 255, 0.14);
  border-radius: 12px;
  padding: 8px 28px 8px 12px;
  font-weight: 800;
  letter-spacing: 0.2px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18),
              0 1px 0 rgba(255, 255, 255, 0.06) inset;
  transition: border-color 0.2s ease, background 0.2s ease;
}

.theme-picker:hover {
  background-color: rgba(0, 0, 0, 0.55); /* slightly darker on hover */
}

/* Light theme styles */
html.theme-light .theme-picker {
  background-color: #ffffff;
  color: #0b1930;
  border-color: rgba(0, 0, 0, 0.1);
}

html.theme-light .theme-picker:hover {
  background-color: #f0f5ff;
}

html.theme-light .theme-select .chev {
  color: #0b1930;
}

.theme-select .chev {
  position: absolute; right: 10px; pointer-events: none; color: var(--muted);
}

/* Layout: group actions */
.header-actions {
  display: inline-flex; align-items: center; gap: 10px;
}

/* Elevated when scrolled */
html.is-scrolled .header.sticky {
  background: linear-gradient(180deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.12) 100%),
              linear-gradient(0deg, rgba(255,255,255,.1), rgba(255,255,255,0.05));
  border-bottom: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 6px 20px rgba(0,0,0,0.35);
  backdrop-filter: blur(var(--blur)); /* Enhanced blur effect */
}

/* Responsive tweaks */
@media (max-width: 900px) {
  .brand-type { display: none; }
  .btn.cmd { display: none; }
  .header-inner { padding: 0 12px; }
}

@media (max-width: 640px) {
  .theme-select { display: none; }
  .nav { 
    max-width: 80vw;
    padding: 3px;
    gap: 4px;
  }
  .nav a {
    --pad-x: 10px;
    padding: 8px var(--pad-x);
    font-size: 14px;
  }
  .header-actions { gap: 6px; }
  .btn.icon { width: 36px; height: 36px; }
}

@media (max-width: 480px) {
  .header.sticky { height: auto; min-height: var(--hdr-h-scrolled); padding: 6px 0; }
  .header-inner { padding: 0 10px; }
  .nav { 
    max-width: 100%;
    width: 100%;
    justify-content: center;
    border-radius: 8px;
  }
  .nav a {
    --pad-x: 8px;
    padding: 6px var(--pad-x);
    font-size: 13px;
  }
  .nav-ink, .nav-ink-glow {
    height: 2px;
    bottom: 1px;
  }
  .header-actions { gap: 4px; }
  .btn.icon { width: 32px; height: 32px; }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .header.sticky, .nav-ink, .nav-ink-glow, .nav a, .btn, .nav a::after { transition: none !important; }
}

.header-inner {
  max-width: 1140px; margin: 0 auto; padding: 0 16px;
  width: 100%;
  display: grid;
  grid-template-columns: 1fr auto 1fr; /* spacer | nav | actions */
  align-items: center;
}

.header-spacer {
  /* balances the actions so nav stays centered */
  height: 1px; /* just exists to fill grid space */
}

/* Center nav in the grid cell */
.nav {
  position: relative; display: flex; gap: 8px; padding: 4px;
  margin: 0 auto;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));
  border: 1px solid rgba(255,255,255,.10);
  overflow: auto hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
}
.nav::-webkit-scrollbar { display: none; }

.header-actions {
  display: flex; justify-content: flex-end; gap: 10px;
}
